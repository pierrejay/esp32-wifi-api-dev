<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFiManager Library Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .method {
            margin: 20px 0;
            padding: 10px;
            border-left: 3px solid #2196F3;
            background: #f9f9f9;
        }
        .warning {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>WiFiManager Library Documentation</h1>
    
    <h2>Overview</h2>
    <p>
        The WiFiManager library provides a complete solution for managing WiFi connections on ESP32 devices. 
        It supports both Access Point (AP) and Station (STA) modes, with features including:
    </p>
    <ul>
        <li>Dual mode operation (AP + STA simultaneously)</li>
        <li>Configuration persistence in SPIFFS</li>
        <li>JSON-based configuration</li>
        <li>Automatic reconnection handling</li>
        <li>mDNS support</li>
        <li>RESTful API integration</li>
    </ul>

    <h2>Quick Start</h2>
    <pre>
#include "WiFiManager.h"

WiFiManager wifiManager;

void setup() {
    Serial.begin(115200);
    
    if (!wifiManager.begin()) {
        Serial.println("WiFiManager initialization failed!");
        return;
    }
}

void loop() {
    wifiManager.poll();
}</pre>

    <h2>Core Classes</h2>
    
    <h3>WiFiManager Class</h3>
    <p>Main class handling WiFi operations and configuration.</p>

    <div class="method">
        <h4>Constructor</h4>
        <pre>WiFiManager()</pre>
        <p>Creates a new WiFiManager instance with default settings.</p>
    </div>

    <div class="method">
        <h4>begin()</h4>
        <pre>bool begin()</pre>
        <p>Initializes the WiFiManager. Returns true on success.</p>
        <p>This method:</p>
        <ul>
            <li>Loads saved configuration from SPIFFS</li>
            <li>Initializes default AP if no configuration exists</li>
            <li>Sets up event handlers</li>
        </ul>
    </div>

    <div class="method">
        <h4>poll()</h4>
        <pre>void poll()</pre>
        <p>Must be called regularly in the main loop. Handles:</p>
        <ul>
            <li>Connection status updates</li>
            <li>Automatic reconnection attempts</li>
            <li>State change notifications</li>
        </ul>
    </div>

    <h3>Configuration Methods</h3>

    <div class="method">
        <h4>setAPConfig()</h4>
        <pre>bool setAPConfig(const ConnectionConfig& config)</pre>
        <p>Configures the Access Point mode with the provided settings.</p>
        <p>Parameters in ConnectionConfig:</p>
        <ul>
            <li>enabled: bool</li>
            <li>ssid: String</li>
            <li>password: String</li>
            <li>channel: int (1-13)</li>
            <li>ip: IPAddress</li>
            <li>gateway: IPAddress</li>
            <li>subnet: IPAddress</li>
        </ul>
    </div>

    <div class="method">
        <h4>setSTAConfig()</h4>
        <pre>bool setSTAConfig(const ConnectionConfig& config)</pre>
        <p>Configures the Station mode with the provided settings.</p>
        <p>Parameters in ConnectionConfig:</p>
        <ul>
            <li>enabled: bool</li>
            <li>ssid: String</li>
            <li>password: String</li>
            <li>dhcp: bool</li>
            <li>ip: IPAddress (if DHCP disabled)</li>
            <li>gateway: IPAddress (if DHCP disabled)</li>
            <li>subnet: IPAddress (if DHCP disabled)</li>
        </ul>
    </div>

    <h3>JSON Configuration</h3>

    <div class="method">
        <h4>setAPConfigFromJson()</h4>
        <pre>bool setAPConfigFromJson(const JsonObject& config)</pre>
        <p>Configures AP mode using a JSON object.</p>
        <p>Example JSON:</p>
        <pre>
{
    "enabled": true,
    "ssid": "ESP32-AP",
    "password": "password123",
    "channel": 1,
    "ip": "192.168.4.1",
    "gateway": "192.168.4.1",
    "subnet": "255.255.255.0"
}</pre>
    </div>

    <div class="method">
        <h4>setSTAConfigFromJson()</h4>
        <pre>bool setSTAConfigFromJson(const JsonObject& config)</pre>
        <p>Configures STA mode using a JSON object.</p>
        <p>Example JSON:</p>
        <pre>
{
    "enabled": true,
    "ssid": "MyNetwork",
    "password": "password123",
    "dhcp": false,
    "ip": "192.168.1.200",
    "gateway": "192.168.1.1",
    "subnet": "255.255.255.0"
}</pre>
    </div>

    <h3>Status Methods</h3>

    <div class="method">
        <h4>getStatusToJson()</h4>
        <pre>void getStatusToJson(JsonObject& obj)</pre>
        <p>Gets current WiFi status in JSON format.</p>
        <p>Returns:</p>
        <pre>
{
    "ap": {
        "enabled": bool,
        "connected": bool,
        "clients": int,
        "ip": string,
        "rssi": int
    },
    "sta": {
        "enabled": bool,
        "connected": bool,
        "ip": string,
        "rssi": int
    }
}</pre>
    </div>

    <h3>Network Scanning</h3>

    <div class="method">
        <h4>getAvailableNetworks()</h4>
        <pre>void getAvailableNetworks(JsonObject& obj)</pre>
        <p>Scans and returns available WiFi networks.</p>
        <p>Returns:</p>
        <pre>
{
    "networks": [
        {
            "ssid": string,
            "rssi": int,
            "encryption": int
        }
    ]
}</pre>
    </div>

    <h2>Constants</h2>
    <pre>
// Default configuration
DEFAULT_AP_SSID = "ESP32-Access-Point"
DEFAULT_AP_PASSWORD = "12345678"
DEFAULT_HOSTNAME = "esp32"

// Timing constants
POLL_INTERVAL = 2000        // Status check interval (ms)
CONNECTION_TIMEOUT = 30000  // Connection attempt timeout (ms)
RETRY_INTERVAL = 30000      // Time between connection retries (ms)</pre>

    <h2>Event Handling</h2>
    <div class="method">
        <h4>onStateChange()</h4>
        <pre>void onStateChange(std::function<void()> callback)</pre>
        <p>Registers a callback for WiFi state changes.</p>
        <p>Example:</p>
        <pre>
wifiManager.onStateChange([]() {
    Serial.println("WiFi state changed!");
});</pre>
    </div>

    <div class="warning">
        <strong>Important Notes:</strong>
        <ul>
            <li>Always call poll() in your main loop</li>
            <li>Password length must be between 8 and 64 characters</li>
            <li>SSID length must not exceed 32 characters</li>
            <li>Static IP configuration requires valid IP, gateway, and subnet mask</li>
            <li>Configuration is automatically saved to SPIFFS</li>
        </ul>
    </div>

</body>
</html> 